const express = require('express');
const router = express.Router();
const thepiratebay = require('./thepiratebay');

//{"results":[{"title":"The.Silencing.2020.720p.WEBRip.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4549340/The-Silencing-2020-720p-WEBRip-800MB-x264-GalaxyRG/","age":"8am Jul. 17th","seed":"1239","size":"796.2 MB","path":"/sub/42/0/","path2":""},{"title":"Legacy.of.Lies.2020.DVDRip.AC3.X264-CMRG[TGx] ⭐","magnet":"http://1337x.to/torrent/4548582/Legacy-of-Lies-2020-DVDRip-AC3-X264-CMRG-TGx/","age":"12am Jul. 17th","seed":"1580","size":"1.5 GB","path":"/sub/54/0/","path2":""},{"title":"Coma.2020.720p.BluRay.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4556048/Coma-2020-720p-BluRay-800MB-x264-GalaxyRG/","age":"8pm Jul. 21st","seed":"1306","size":"797.5 MB","path":"/sub/42/0/","path2":""},{"title":"Coma.2020.BDRip.XviD.AC3-EVO[TGx] ⭐","magnet":"http://1337x.to/torrent/4555732/Coma-2020-BDRip-XviD-AC3-EVO-TGx/","age":"2pm Jul. 21st","seed":"840","size":"1.3 GB","path":"/sub/54/0/","path2":""},{"title":"The Silencing (2020) [1080p] [WEBRip] [2.0] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4550157/The-Silencing-2020-1080p-WEBRip-2-0-YTS-YIFY/","age":"6pm Jul. 17th","seed":"3264","size":"1.6 GB","path":"/sub/42/0/","path2":""},{"title":"The.Very.Excellent.Mr.Dundee.2020.720p.AMZN.WEBRip.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4553579/The-Very-Excellent-Mr-Dundee-2020-720p-AMZN-WEBRip-800MB-x264-GalaxyRG/","age":"11pm Jul. 19th","seed":"496","size":"796.8 MB","path":"/sub/42/0/","path2":""},{"title":"Girls.Guns.and.Blood.2019.HDRip.XviD.AC3.With.Sample.LLG","magnet":"http://1337x.to/torrent/4550725/Girls-Guns-and-Blood-2019-HDRip-XviD-AC3-With-Sample-LLG/","age":"5am Jul. 18th","seed":"231","size":"1.0 GB","path":"/sub/2/0/","path2":""},{"title":"A.Nice.Girl.Like.You.2020.720p.WEBRip.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4549216/A-Nice-Girl-Like-You-2020-720p-WEBRip-800MB-x264-GalaxyRG/","age":"6am Jul. 17th","seed":"435","size":"796.4 MB","path":"/sub/42/0/","path2":""},{"title":"Open.24.Hours.2020.720p.WEBRip.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4553800/Open-24-Hours-2020-720p-WEBRip-800MB-x264-GalaxyRG/","age":"3am Jul. 20th","seed":"366","size":"796.5 MB","path":"/sub/42/0/","path2":""},{"title":"The Silencing (2020) [720p] [WEBRip] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4549996/The-Silencing-2020-720p-WEBRip-YTS-YIFY/","age":"5pm Jul. 17th","seed":"2741","size":"866.3 MB","path":"/sub/42/0/","path2":""},{"title":"The.Resistance.Fighter.2020.720p.BluRay.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4553796/The-Resistance-Fighter-2020-720p-BluRay-800MB-x264-GalaxyRG/","age":"2am Jul. 20th","seed":"382","size":"797.3 MB","path":"/sub/42/0/","path2":""},{"title":"One.Way.To.Denmark.2020.720p.WEBRip.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4553792/One-Way-To-Denmark-2020-720p-WEBRip-800MB-x264-GalaxyRG/","age":"2am Jul. 20th","seed":"217","size":"795.9 MB","path":"/sub/42/0/","path2":""},{"title":"Blood.Vessel.2020.HDRip.XviD.AC3-EVO","magnet":"http://1337x.to/torrent/4555809/Blood-Vessel-2020-HDRip-XviD-AC3-EVO/","age":"3pm Jul. 21st","seed":"381","size":"1.4 GB","path":"/sub/2/0/","path2":""},{"title":"Nostradamus - Future Tense (2020) 720p WEB x264 Dr3adLoX","magnet":"http://1337x.to/torrent/4555828/Nostradamus-Future-Tense-2020-720p-WEB-x264-Dr3adLoX/","age":"4pm Jul. 21st","seed":"211","size":"1.5 GB","path":"/sub/42/0/","path2":""},{"title":"American.Fighter.2020.720p.WEBRip.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4553766/American-Fighter-2020-720p-WEBRip-800MB-x264-GalaxyRG/","age":"2am Jul. 20th","seed":"253","size":"796.4 MB","path":"/sub/42/0/","path2":""},{"title":"Becky.2020.720p.BluRay.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4551784/Becky-2020-720p-BluRay-800MB-x264-GalaxyRG/","age":"4am Jul. 19th","seed":"145","size":"797.2 MB","path":"/sub/42/0/","path2":""},{"title":"Alien Agenda (2020) 720p WEB x264 Dr3adLoX","magnet":"http://1337x.to/torrent/4552143/Alien-Agenda-2020-720p-WEB-x264-Dr3adLoX/","age":"12pm Jul. 19th","seed":"97","size":"890.3 MB","path":"/sub/42/0/","path2":""},{"title":"Gundala.2020.DUBBED.720p.BluRay.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4551989/Gundala-2020-DUBBED-720p-BluRay-800MB-x264-GalaxyRG/","age":"10am Jul. 19th","seed":"208","size":"797.5 MB","path":"/sub/42/0/","path2":""},{"title":"The.Silencing.2020.1080p.WEBRip.X264.AC3-EVO[TGx] ⭐","magnet":"http://1337x.to/torrent/4549269/The-Silencing-2020-1080p-WEBRip-X264-AC3-EVO-TGx/","age":"7am Jul. 17th","seed":"169","size":"4.0 GB","path":"/sub/42/0/","path2":""},{"title":"Coma (2019) [1080p] [WEBRip] [5.1] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4556543/Coma-2019-1080p-WEBRip-5-1-YTS-YIFY/","age":"4am Jul. 22nd","seed":"962","size":"2.0 GB","path":"/sub/42/0/","path2":""},{"title":"Gundala (2019) [720p] [BluRay] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4549615/Gundala-2019-720p-BluRay-YTS-YIFY/","age":"11am Jul. 17th","seed":"602","size":"1.1 GB","path":"/sub/42/0/","path2":""},{"title":"Gundala.2020.BDRip.XviD.AC3-EVO[TGx] ⭐","magnet":"http://1337x.to/torrent/4549091/Gundala-2020-BDRip-XviD-AC3-EVO-TGx/","age":"5am Jul. 17th","seed":"91","size":"1.5 GB","path":"/sub/54/0/","path2":""},{"title":"SamSam.2020.720p.WEBRip.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4548505/SamSam-2020-720p-WEBRip-800MB-x264-GalaxyRG/","age":"11pm Jul. 16th","seed":"133","size":"796.5 MB","path":"/sub/42/0/","path2":""},{"title":"Gone.in.60.Seconds.2000.720p.BluRay.999MB.HQ.x265.10bit-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4551477/Gone-in-60-Seconds-2000-720p-BluRay-999MB-HQ-x265-10bit-GalaxyRG/","age":"7pm Jul. 18th","seed":"86","size":"1,000.0 MB","path":"/sub/42/0/","path2":""},{"title":"White.Lie.2020.720p.WEBRip.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4555349/White-Lie-2020-720p-WEBRip-800MB-x264-GalaxyRG/","age":"7am Jul. 21st","seed":"235","size":"797.3 MB","path":"/sub/42/0/","path2":""},{"title":"The.Sunlit.Night.2020.720p.WEBRip.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4548824/The-Sunlit-Night-2020-720p-WEBRip-800MB-x264-GalaxyRG/","age":"2am Jul. 17th","seed":"114","size":"795.8 MB","path":"/sub/42/0/","path2":""},{"title":"A.Killer.Next.Door.2020.720p.WEBRip.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4555525/A-Killer-Next-Door-2020-720p-WEBRip-800MB-x264-GalaxyRG/","age":"11am Jul. 21st","seed":"276","size":"795.9 MB","path":"/sub/42/0/","path2":""},{"title":"Dirt.Music.2020.720p.WEBRip.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4549261/Dirt-Music-2020-720p-WEBRip-800MB-x264-GalaxyRG/","age":"7am Jul. 17th","seed":"108","size":"797.1 MB","path":"/sub/42/0/","path2":""},{"title":"Fatal Affair (2020) [720p] [WEBRip] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4548781/Fatal-Affair-2020-720p-WEBRip-YTS-YIFY/","age":"2am Jul. 17th","seed":"571","size":"827.4 MB","path":"/sub/42/0/","path2":""},{"title":"Don't Let Them In (2020) [720p] [WEBRip] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4556366/Don-t-Let-Them-In-2020-720p-WEBRip-YTS-YIFY/","age":"1am Jul. 22nd","seed":"472","size":"748.0 MB","path":"/sub/42/0/","path2":""},{"title":"Jackie Chan Presents: Amnesia (2015) [720p] [WEBRip] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4554101/Jackie-Chan-Presents-Amnesia-2015-720p-WEBRip-YTS-YIFY/","age":"7am Jul. 20th","seed":"225","size":"935.6 MB","path":"/sub/42/0/","path2":""},{"title":"A Nice Girl Like You (2020) [720p] [WEBRip] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4549431/A-Nice-Girl-Like-You-2020-720p-WEBRip-YTS-YIFY/","age":"9am Jul. 17th","seed":"1326","size":"867.3 MB","path":"/sub/42/0/","path2":""},{"title":"Easy.Does.It.2020.720p.WEBRip.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4549297/Easy-Does-It-2020-720p-WEBRip-800MB-x264-GalaxyRG/","age":"7am Jul. 17th","seed":"91","size":"796.5 MB","path":"/sub/42/0/","path2":""},{"title":"Joy of Sex (1984) [720p] [WEBRip] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4555569/Joy-of-Sex-1984-720p-WEBRip-YTS-YIFY/","age":"11am Jul. 21st","seed":"199","size":"816.9 MB","path":"/sub/42/0/","path2":""},{"title":"A Nice Girl Like You (2020) [1080p] [WEBRip] [5.1] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4549626/A-Nice-Girl-Like-You-2020-1080p-WEBRip-5-1-YTS-YIFY/","age":"11am Jul. 17th","seed":"1293","size":"1.7 GB","path":"/sub/42/0/","path2":""},{"title":"The.Silencing.2020.HDRip.XviD.AC3-EVO[TGx] ⭐","magnet":"http://1337x.to/torrent/4549271/The-Silencing-2020-HDRip-XviD-AC3-EVO-TGx/","age":"7am Jul. 17th","seed":"248","size":"1.3 GB","path":"/sub/54/0/","path2":""},{"title":"Prisoner X (2016) [720p] [WEBRip] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4556956/Prisoner-X-2016-720p-WEBRip-YTS-YIFY/","age":"2pm Jul. 22nd","seed":"392","size":"810.6 MB","path":"/sub/42/0/","path2":""},{"title":"D-Day: Normandy 1944 (2014) [1080p] [BluRay] [5.1] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4550232/D-Day-Normandy-1944-2014-1080p-BluRay-5-1-YTS-YIFY/","age":"8pm Jul. 17th","seed":"776","size":"810.7 MB","path":"/sub/42/0/","path2":""},{"title":"Race Against Pandemic (2020) [720p] [WEBRip] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4547847/Race-Against-Pandemic-2020-720p-WEBRip-YTS-YIFY/","age":"8pm Jul. 16th","seed":"126","size":"439.1 MB","path":"/sub/42/0/","path2":""},{"title":"D-Day.Normandy.1944.2014.2160p.UHD.HDR.BluRay.x265.10bit.DD5.1.[WMAN-LorD]","magnet":"http://1337x.to/torrent/4550304/D-Day-Normandy-1944-2014-2160p-UHD-HDR-BluRay-x265-10bit-DD5-1-WMAN-LorD/","age":"9pm Jul. 17th","seed":"31","size":"1.7 GB","path":"/sub/76/0/","path2":""},{"title":"Becky (2020) [720p] [BluRay] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4554656/Becky-2020-720p-BluRay-YTS-YIFY/","age":"7pm Jul. 20th","seed":"821","size":"856.4 MB","path":"/sub/42/0/","path2":""},{"title":"Psych 2: Lassie Come Home (2020) [720p] [WEBRip] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4548091/Psych-2-Lassie-Come-Home-2020-720p-WEBRip-YTS-YIFY/","age":"9pm Jul. 16th","seed":"256","size":"814.6 MB","path":"/sub/42/0/","path2":""},{"title":"Greyhound (2020) (1080p APTV WEB-DL x265 HEVC 10bit AC3 5.1 Qman) [UTR]","magnet":"http://1337x.to/torrent/4551481/Greyhound-2020-1080p-APTV-WEB-DL-x265-HEVC-10bit-AC3-5-1-Qman-UTR/","age":"7pm Jul. 18th","seed":"59","size":"2.1 GB","path":"/sub/70/0/","path2":""},{"title":"Coma (2019) [720p] [WEBRip] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4556447/Coma-2019-720p-WEBRip-YTS-YIFY/","age":"2am Jul. 22nd","seed":"788","size":"1,020.4 MB","path":"/sub/42/0/","path2":""},{"title":"Quarantine 2: Terminal (2011) [720p] [WEBRip] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4554639/Quarantine-2-Terminal-2011-720p-WEBRip-YTS-YIFY/","age":"6pm Jul. 20th","seed":"176","size":"792.9 MB","path":"/sub/42/0/","path2":""},{"title":"The Very Excellent Mr. Dundee (2020) [720p] [WEBRip] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4554913/The-Very-Excellent-Mr-Dundee-2020-720p-WEBRip-YTS-YIFY/","age":"2am Jul. 21st","seed":"384","size":"808.5 MB","path":"/sub/42/0/","path2":""},{"title":"Psych 2: Lassie Come Home (2020) [1080p] [WEBRip] [5.1] [YTS] [YIFY]","magnet":"http://1337x.to/torrent/4548220/Psych-2-Lassie-Come-Home-2020-1080p-WEBRip-5-1-YTS-YIFY/","age":"10pm Jul. 16th","seed":"321","size":"1.6 GB","path":"/sub/42/0/","path2":""},{"title":"Guest.Artist.2020.720p.WEBRip.800MB.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4555320/Guest-Artist-2020-720p-WEBRip-800MB-x264-GalaxyRG/","age":"7am Jul. 21st","seed":"132","size":"796.2 MB","path":"/sub/42/0/","path2":""},{"title":"The.Silencing.2020.1080p.WEBRip.1400MB.DD2.0.x264-GalaxyRG ⭐","magnet":"http://1337x.to/torrent/4549670/The-Silencing-2020-1080p-WEBRip-1400MB-DD2-0-x264-GalaxyRG/","age":"12pm Jul. 17th","seed":"67","size":"1.4 GB","path":"/sub/42/0/","path2":""},{"title":"Radio.Silence.2020.HDRip.XviD.AC3-EVO","magnet":"http://1337x.to/torrent/4551344/Radio-Silence-2020-HDRip-XviD-AC3-EVO/","age":"5pm Jul. 18th","seed":"55","size":"1.3 GB","path":"/sub/2/0/","path2":""}]}
///soongwei/TPBService/searchGET?type=1&search=           top movies
//http://soongwei.synology.me/soongwei/TPBService/searchGET?type=2&search=                   top tv shoes
//http://soongwei.synology.me/soongwei/TPBService/searchGET?type=3&search=             music
//http://soongwei.synology.me/soongwei/TPBService/searchGET?type=0&search=hulk%20the%20best                  searchj
//http://soongwei.synology.me/soongwei/TPBService/magnetGET?type=&search=http://1337x.to/torrent/4549340/The-Silencing-2020-720p-WEBRip-800MB-x264-GalaxyRG/       
//{"category":"Movies","results":"magnet:?xt=urn:btih:71A146CD4E741F1DA28CE4E6FDF380923C47C82F&dn=The.Silencing.2020.720p.WEBRip.800MB.x264-GalaxyRG+%E2%AD%90&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.cyberia.is%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.iamhansen.xyz%3A2000%2Fannounce&tr=udp%3A%2F%2Fp4p.arenabg.com%3A1337%2Fannounce&tr=udp%3A%2F%2Fexplodie.org%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337%2Fannounce&tr=udp%3A%2F%2Ftracker.tiny-vps.com%3A6969%2Fannounce&tr=udp%3A%2F%2Fexodus.desync.com%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.torrent.eu.org%3A451%2Fannounce&tr=udp%3A%2F%2Ftracker.moeking.me%3A6969%2Fannounce&tr=udp%3A%2F%2Fipv4.tracker.harry.lu%3A80%2Fannounce&tr=udp%3A%2F%2Fopen.stealth.si%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.to%3A2710%2Fannounce&tr=udp%3A%2F%2Ftracker.zer0day.to%3A1337%2Fannounce&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969%2Fannounce&tr=udp%3A%2F%2Fcoppersurfer.tk%3A6969%2Fannounce"}         magentt 
router.get('/searchGET', function (req, res, next) {
   
    const type = req.query.type;
    const search = req.query.search;

    console.log("datain: " , req.query, type, search)

    return thepiratebay.get(type, search).then((results) => {
        return res.status(200).send(results);
    }).catch((reason) => {
        next(reason);
    });

});

module.exports = router;